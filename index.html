<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Monitor</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body { background-color: #000; color: #fff; font-family: sans-serif; padding: 15px; margin: 0; }
        .card { background: #111; border: 1px solid #333; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .title { font-size: 24px; color: #888; margin-bottom: 10px; }
        /* Big Font for Mobile */
        .price { font-size: 64px; font-weight: 800; color: #00ff00; line-height: 1; }
        .sma { font-size: 24px; color: #007aff; margin-top: 10px; }
        .chart { width: 100%; height: 300px; margin-top: 15px; }
    </style>
</head>
<body>
    <div id="app">Loading...</div>
    <script>
        async function load() {
            const r = await fetch('data.json');
            const d = await r.json();
            const app = document.getElementById('app');
            app.innerHTML = '';
            Object.keys(d).forEach(k => {
                const history = d[k];
                const last = history[history.length - 1];
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<div class="title">${k}</div><div class="price">${last.price.toFixed(3)}</div><div class="sma">SMA5: ${last.sma5.toFixed(3)}</div><div id="c-${k}" class="chart"></div>`;
                app.appendChild(card);
                const chart = echarts.init(document.getElementById(`c-${k}`));
                chart.setOption({
                    grid: { left: '12%', right: '5%', bottom: '15%', top: '10%' },
                    xAxis: { type: 'category', data: history.map(h => h.time), axisLabel: { color: '#444' } },
                    yAxis: { type: 'value', scale: true, axisLabel: { color: '#444' }, splitLine: { lineStyle: { color: '#222' } } },
                    series: [
                        { type: 'line', data: history.map(h => h.price), lineStyle: { color: '#00ff00', width: 3 }, symbol: 'none' },
                        { type: 'line', data: history.map(h => h.sma5), lineStyle: { color: '#007aff', width: 2, type: 'dashed' }, symbol: 'none' }
                    ]
                });
            });
        }
        load();
        setInterval(load, 60000);
    </script>
</body>
</html>
